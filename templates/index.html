<!doctype html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI Circuit Generator | تولید مدار هوشمند</title>
    <link rel="stylesheet" href="/static/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="logo">
            <div class="logo-icon">⚡</div>
            <h2>Circuit AI</h2>
          </div>
          <div class="sidebar-header-actions">
            <button id="btnToggleSettings" class="btn-glass btn-icon" title="تنظیمات">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-settings"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.78 1.31a2 2 0 0 0 .73 2.73l.15.08a2 2 0 0 1 1 1.74v.44a2 2 0 0 1-1 1.73l-.15.08a2 2 0 0 0-.73 2.73l.78 1.31a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 1-1.74v.18a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.78-1.31a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.44a2 2 0 0 1 1-1.73l.15-.08a2 2 0 0 0 .73-2.73l-.78-1.31a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-1-1.74V2a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
            </button>
            <button id="btnNewChat" class="btn-glass btn-icon" title="چت جدید">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
          </div>
        </div>

        <div class="sidebar-content">
          <div id="sidebarContentWrapper" class="sidebar-content-wrapper">
            <div id="settingsSection" class="settings-section">
              <h3 class="section-title">تنظیمات</h3>
              <div class="form-group">
                <label for="llmBaseUrl">Base URL</label>
                <input id="llmBaseUrl" type="text" class="input-glass" value="http://127.0.0.1:1234" placeholder="http://127.0.0.1:1234" />
              </div>
              <div class="form-group">
                <label for="llmModel">نام مدل</label>
                <input id="llmModel" type="text" class="input-glass" value="grok-3-reasoning-gemma3-4b-distilled-hf" placeholder="نام مدل" />
              </div>
              <div class="form-group">
                <label for="llmApiKey">API Key</label>
                <input id="llmApiKey" type="password" class="input-glass" placeholder="sk-... یا API Key محلی" />
                <small class="input-hint">برای OpenAI با sk- شروع می‌شود</small>
              </div>
            </div>

            <div id="historySection" class="history-section active">
              <h3 class="section-title">تاریخچه</h3>
              <div id="chatSessions" class="chat-sessions">
                <div class="session-item active" data-session="default">
                  <span class="session-name" contenteditable="false">چت جدید</span>
                  <div class="session-actions">
                    <button class="btn-edit-session" data-session="default" title="ویرایش نام">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                      </svg>
                    </button>
                    <button class="btn-delete-session" data-session="default" title="حذف">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </aside>

      <!-- Main Chat Area -->
      <main class="chat-main">
        <div class="chat-header">
          <div class="header-left">
            <button id="btnToggleSidebar" class="btn-glass btn-icon" title="باز/بسته کردن منو">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
              </svg>
            </button>
            <div class="header-title">
              <h1 id="chatSessionTitle">چت جدید</h1>
              <p class="header-subtitle">مدار خود را با هوش مصنوعی طراحی کنید</p>
            </div>
          </div>
          <div class="header-actions">
            <button id="btnClearChat" class="btn-glass btn-icon" title="پاک کردن چت">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              </svg>
            </button>
          </div>
        </div>

        <div id="chatMessages" class="chat-messages">
          <div class="welcome-message">
            <div class="welcome-icon">
              <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
              </svg>
            </div>
            <h2>خوش آمدید</h2>
            <p>توضیح مدار خود را به فارسی بنویسید و من برای شما کد و تصویر مدار را تولید می‌کنم.</p>
            <div class="example-prompts">
              <div class="example-prompt glass-card" data-prompt="یک فیلتر RC پایین‌گذر با مقاومت 10k و خازن 10nF">
                <span>فیلتر RC پایین‌گذر</span>
              </div>
              <div class="example-prompt glass-card" data-prompt="یک تقویت‌کننده عملیاتی با فیدبک منفی">
                <span>تقویت‌کننده عملیاتی</span>
              </div>
              <div class="example-prompt glass-card" data-prompt="یک مدار نوسان‌ساز RC">
                <span>نوسان‌ساز RC</span>
              </div>
            </div>
          </div>
        </div>

        <div class="chat-input-container">
          <div class="input-wrapper glass-card">
            <textarea 
              id="chatInput" 
              placeholder="توضیح مدار خود را بنویسید..."
              rows="1"
            ></textarea>
            <button id="btnSend" class="btn-send" title="ارسال">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="22" y1="2" x2="11" y2="13"></line>
                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
              </svg>
            </button>
          </div>
        </div>
      </main>
    </div>

    <div id="toastContainer" class="toast-container"></div>

    <script src="/static/app.js"></script>
  </body>
</html>
